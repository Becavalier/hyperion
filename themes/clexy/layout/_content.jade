//- index page;
if is_home()
  h4.page-title Recent Articles
  each post, index in site.posts.sort('date', 'desc').toArray()
    if (index < config.index_generator.per_page)
      a.article(href=config.root + post.path)
        article.item(itemscope, itemprop='blogPost', itemtype='https://schema.org/BlogPosting')
          h2(itemprop='headline')=post.title
          span.post-meta
            | Published on
            time(itemprop='datePublished', datetime=post.date.toISOString())=full_date(new Date(post.date), ' YYYY / MM / DD, HH:mm:ss')
          p(itemprop='text').post-excerpt=post.intro ? post.intro : post.content.replace(/<(?:.|\n)*?>/gm, '').substr(0, 220)
  h4.page-title See more? Please go to "Articles" page : )

//- articles page;
if is_archive() || (is_page() && page.title.toLowerCase() == 'articles')
  article.full
    h1(itemprop='headline')=page.title
      a(href=config.root + 'search/')
        i(class='fa fa-search')
    !=page.content
    - var lastyear = 0
    for post, index in site.posts.sort('date', 'desc').toArray()
      if lastyear != post.date.format('YYYY')
        if index != 0
          | </ul>
        - lastyear = post.date.format('YYYY')
        h4=lastyear
        | <ul class="catelog-items">
        li(itemprop='name')
          a(href=config.root + post.path, itemprop='url') 《#{post.title}》
          if (post.tags.data !== undefined && post.tags.data.length > 0)
            | &nbsp;&mdash;&nbsp;&nbsp;
            span(itemprop='category')
              for tag in post.tags.data
                a(href=config.root + 'tags/' + tag.name, itemprop='url') #{'#' + tag.name}
                |&nbsp;|&nbsp;
            time(itemprop='datePublished', datetime=post.date.toISOString())=full_date(new Date(post.date), 'MM/DD')
      else
        li
          a(href=config.root + post.path) 《#{post.title}》
          if (post.tags.data !== undefined && post.tags.data.length > 0)
            | &nbsp;&mdash;&nbsp;&nbsp;
            span(itemprop='category')
              for tag in post.tags.data
                a(href=config.root + 'tags/' + tag.name, itemprop='url') #{'#' + tag.name}
                |&nbsp;|&nbsp;
            time(itemprop='datePublished', datetime=post.date.toISOString())=full_date(new Date(post.date), 'MM/DD')
    if site.posts.toArray().length != 0
      | </ul>
else if is_page() && page.title.toLowerCase() =='books'
  script(src='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.3.200/pdf.min.js', type='text/javascript')
  script(src='https://shadow.elemecdn.com/npm/axios@0.18.0/dist/axios.min.js', type='text/javascript')
  script(src=config.root + 'scripts/book.js', type='text/javascript')
  article.full
    h1(itemprop='headline')=page.title
    .books-container
else if is_page() && page.title.toLowerCase() =='author'
  article.full
    h1(itemprop='headline')=page.title
    .avatar
    if (config.about !== undefined)
      .avatar-name
        | #{config.about.name}
      .avatar-description
        | #{config.about.intro1}
      if (config.about.intro2 != undefined)
        .avatar-description
          | #{config.about.intro2}
      if (config.about.skills != undefined)
        .avatar-skills-block
          for skill in config.about.skills.split(', ')
            .avatar-skills
              span
                | #{skill}
      br
      .social-container
        if (config.about.linkedin !== undefined)
          a(target="_blank", href=config.about.linkedin)
            span(class="fa fa-linkedin icons" aria-hidden="true")
        if (config.about.facebook !== undefined)
          a(target="_blank", href=config.about.facebook)
            span(class="fa fa-facebook icons" aria-hidden="true")
        if (config.about.twitter !== undefined)
          a(target="_blank", href=config.about.twitter)
            span(class="fa fa-twitter icons" aria-hidden="true")
        if (config.about.instagram !== undefined)
          a(target="_blank", href=config.about.instagram)
            span(class="fa fa-instagram icons" aria-hidden="true")
        if (config.about.email !== undefined)
          a(href="mailto:" + config.about.email)
            span(class="fa fa-envelope icons" aria-hidden="true")
        if (config.about.github !== undefined)
          a(target="_blank", href=config.about.github)
            span(class="fa fa-github icons" aria-hidden="true")
        if (config.about.stackoverflow !== undefined)
          a(target="_blank", href=config.about.stackoverflow)
            span(class="fa fa-stack-overflow icons" aria-hidden="true")
        if (config.about.sourceforge !== undefined)
          a(target="_blank", href=config.about.sourceforge)
            span(class="fa fa-noicon icons no-icons" aria-hidden="true")
        if (config.about.resume !== undefined)
          a(target="_blank", href=config.about.resume)
            span(class="fa fa-id-card icons" aria-hidden="true")
else if is_page() && page.title.toLowerCase() =='works'
  article.full
    h1(itemprop='headline')=page.title
    | : ( 暂无内容，有空再加。
else if is_page() && page.title.toLowerCase() =='readings'
  article(class='full readings-page')
    h1(itemprop='headline')=page.title
    span(class="meta")='列在此处的书/论文均已读完至少一遍，部分书籍会有相应的笔记，可以在“文章”栏目里寻找。'
    h4='- C++'
    a(target="_blank", href="https://book.douban.com/subject/25708312/")='《C++ Primer 中文版（第5版）》—  #C++ | 04/2020'
    a(target="_blank", href="https://book.douban.com/subject/1842426/")='《Effective C++ 第3版》—  #C++ | 04/2020'
    a(target="_blank", href="https://book.douban.com/subject/24738301/")='《深入理解 C++11：C++11 新特性解析与应用》—  #C++ | 05/2020'
    a(target="_blank", href="https://book.douban.com/subject/25923597/")='《Effective Modern C++》—  #C++ | 05/2020'
    h4='- 前端'
    a(target="_blank", href="https://book.douban.com/subject/33477112/")='《前端架构：从入门到微前端》—  #前端 | 10/2019'
    h4='- 后端'
    a(target="_blank", href="https://book.douban.com/subject/30465267/")='《深入浅出 Serverless：技术原理与应用实践》—  #后端 | 07/2019'
    h4='- 产品'
    a(target="_blank", href="https://book.douban.com/subject/26608585/")='《重新定义团队：谷歌如何工作》—  #产品 | 01/2019'
    a(target="_blank", href="https://book.douban.com/subject/4118751/")='《阿米巴经营》—  #产品 | 01/2019'
    a(target="_blank", href="https://book.douban.com/subject/26270679/")='《零售的哲学》—  #产品 | 01/2019'
    a(target="_blank", href="https://book.douban.com/subject/26541801/")='《增长黑客：创业公司的用户与收入增长秘籍》—  #产品 | 01/2019'
    a(target="_blank", href="https://book.douban.com/subject/27132072/")='《OKR 工作法：谷歌、领英等顶级公司的高绩效秘籍》—  #产品 | 12/2018'
    h4='-计算机'
    a(target="_blank", href="https://book.douban.com/subject/26397183/")='《计算机是怎样跑起来的》—  #计算机 | 11/2019'
    a(target="_blank", href="https://book.douban.com/subject/25863515/")='《图解 HTTP》—  #计算机 | 12/2018'
    h4='- 其他'
    a(target="_blank", href="https://book.douban.com/subject/25857941/")='《病毒来袭 - 如何应对下一场流行病的暴发》—  #生物学 | 01/2019'
    a(target="_blank", href="https://book.douban.com/subject/26324497/")='《支付战争 - 互联网金融创世纪》—  #历史 | 07/2019'
    a(target="_blank", href="https://book.douban.com/subject/30356081/")='《奈非文化手册》—  #创业 | 06/2019'
    a(target="_blank", href="https://book.douban.com/subject/24335672/")='《淘宝技术这十年 - 淘宝技术大学校长解密淘宝十年》—  #创业 | 12/2018'


else if is_page() && page.title.toLowerCase() =='search'
  script(src='https://shadow.elemecdn.com/npm/axios@0.18.0/dist/axios.min.js', type='text/javascript')
  script(src=config.root + 'scripts/search.js', type='text/javascript')
  article(class='full search-page')
    h1(itemprop='headline')=page.title
    div(class='search-container')
      input(class='input-search', autofocus, type='text', placeholder="请输入搜索关键字/正则 ...")
      button.submit-search
        | 搜索
    div.no-result
      i(class="fa fa-battery-empty")
        | &nbsp;&nbsp;暂无相关内容 T T
    div(class='search-result-container' data-type='Post')
    div(class='search-result-container' data-type='Tag')
    
else if is_post()
  script(src='https://shadow.elemecdn.com/npm/zoomage.js@latest/dist/zoomage.min.js', type='text/javascript')
  script(src='https://shadow.elemecdn.com/npm/axios@0.18.0/dist/axios.min.js', type='text/javascript')
  script(src=config.root + 'scripts/post.js', type='text/javascript')
  .touch-top
    span
  article(post-id=page.id).full
    h1(itemprop='headline', class='post-heading')=page.title
    .article-meta
      span.post-meta
        if page.updated
          br
          | Created on
          time(itemprop='dateCreated', datetime=page.date.toISOString())=full_date(new Date(page.date), ' YYYY / MM / DD, HH:mm:ss')
      span(class='page-tag-anchor')
        for tag in page.tags.data
          a(href=config.root + 'tags/' + tag.name, itemprop='url') #{'#' + tag.name}
          | &nbsp;&nbsp;
    br
    !=page.content
    br
    .article-bottom-meta
      span.post-meta
        | Last built on
        time(itemprop='dateModified', datetime=page.date.toISOString())=full_date(new Date(page.updated), ' YYYY / MM / DD, HH:mm:ss')
  br
  a(name="comments")
  .article-end-saparator
    span(class="line")
    span(class="text")
      | 这是文章底线，下面是评论
    span(class="line")
  if page.comments
    div.comments-display-container
      div.placeholder
        i(class="fa fa-battery-empty")
          | &nbsp;&nbsp;暂无评论，欢迎勾搭 ：）
    div.dot-decoration
    div.comments-input
      textarea(name="comment", placeholder="请输入评论内容 ...")
      div
        input(type="text", placeholder="请输入昵称 ...")
        button.submit-comment
          | 发布
  if page.next
    span(class='next-post')
      a(href=config.root + page.next.path, itemprop='url') #{ 'Older Post ⇒'}
  if page.prev
    span(class='prev-post')
      a(href=config.root + page.prev.path, itemprop='url') #{ '⇐ Next Post '}
  br
  include _comments
  br
  br
  br
  br
else if is_tag()
  article.full
    h1(itemprop='headline')='tag : ' + page.tag
    !=page.content
    - var lastyear = 0
    - var tag_posts = site.tags.findOne({name: page.tag}).posts
    for post, index in tag_posts.sort('date', 'desc').toArray()
      if lastyear != post.date.format('YYYY')
        if index != 0
          | </ul>
        - lastyear = post.date.format('YYYY')
        h4=lastyear
        | <ul class="catelog-items">
        li(itemprop='name')
          a(href=config.root + post.path, itemprop='url') 《#{post.title}》
          |  &nbsp; &mdash; &nbsp;&nbsp;
          for tag in post.tags.data
            a(href=config.root + 'tags/' + tag.name, itemprop='url') #{'#'+tag.name}
            | &nbsp;&nbsp;
      else
        li
          a(href=config.root + post.path) 《#{post.title}》
          |  &nbsp; &mdash; &nbsp;&nbsp;
          for tag in post.tags.data
            a(href=config.root + 'tags/' + tag.name, itemprop='url') #{'#'+tag.name}
            | &nbsp;&nbsp;
    | </ul>
else if is_page() && page.title.toLowerCase() =='tags'
  article.full
    h1(itemprop='headline')=page.title
      a(href=config.root + 'search/')
        i(class='fa fa-search')
    .tag-item
      for tag in site.tags.data
        a(href=config.root + 'tags/' + tag.name, itemprop='url') #{'#'+tag.name}
else if is_page()
  article.full
    br
    br
    br
    br
    h3="Some Error Occured (404) :( "
    if page.updated
      span.post-meta
    !=page.content
    a(href=config.root, itemprop='url')
      h6='Click "here" to go Home.'
