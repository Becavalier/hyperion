<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>前端面试模版 | 曜彤.手记</title><meta name="baidu-site-verification" content="codeva-P9jyH0b1lv"><meta name="description" content="自用前端面试模版。"><meta name="generator" content="曜彤.手记"><meta name="keywords" content="博客, C++, C, Rust, Web, Java, IT, 编程, 开发, Android, Python, MySQL, 科技, 黑客, 技术, Javascript, 云, 大数据, 计算, 机器学习, AI, 人工智能, 创业, 产品, 公司, WebAssembly, Wasm"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.jpg"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.jpg"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.jpg"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.jpg"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.jpg"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.jpg"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.jpg"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.jpg"><link rel="apple-touch-icon" sizes="196x196" href="/images/apple-touch-icon-196x196.jpg"><link rel="apple-touch-icon" sizes="310x310" href="/images/apple-touch-icon-310x310.jpg"><link href="/images/splash/iphone5_splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="/images/splash/iphone6_splash.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="/images/splash/iphoneplus_splash.png" media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image"><link href="/images/splash/iphonex_splash.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image"><link href="/images/splash/iphonexr_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="/images/splash/iphonexsmax_splash.png" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)" rel="apple-touch-startup-image"><link href="/images/splash/ipad_splash.png" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="/images/splash/ipadpro1_splash.png" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="/images/splash/ipadpro3_splash.png" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link href="/images/splash/ipadpro2_splash.png" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)" rel="apple-touch-startup-image"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="128x128" href="/images/favicon-128.png"><link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-196x196.png"><meta name="msapplication-TileColor" content="#FFFFFF"><meta name="msapplication-TileImage" content="mstile-144x144.png"><meta name="msapplication-square70x70logo" content="mstile-70x70.png"><meta name="msapplication-square150x150logo" content="mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="mstile-310x150.png"><meta name="msapplication-square310x310logo" content="mstile-310x310.png"><meta name="msapplication-square310x310logo" content="mstile-310x310.png"><link rel="manifest" href="/manifest.webmanifest"><link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml"><link rel="stylesheet" href="/css/prism-okaidia.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body itemscope itemtype="https://schema.org/WebPage"><div class="canvas-containter"><span>X</span></div><header itemscope itemtype="https://schema.org/WPHeader"><div class="logo"></div><h1 class="title"><a href="/" alt="曜彤.手记" title="曜彤.手记" itemprop="headline">曜彤.手记</a><a title="Atom 0.3" target="__blank" href="/atom.xml" class="rss"><img src="/images/rss.png"></a></h1><p itemprop="description" class="description">随记，关于互联网技术、产品与创业</p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name" class="menu-item"><a href="/ " alt="首页" title="首页" itemprop="url">首页</a></li><li itemprop="name" class="menu-item"><a href="/articles" alt="文章" title="文章" itemprop="url">文章</a></li><li itemprop="name" class="menu-item"><a href="/readings" alt="阅读" title="阅读" itemprop="url">阅读</a></li><li itemprop="name" class="menu-item"><a href="/cards" alt="快记" title="快记" itemprop="url">快记</a></li><li itemprop="name" class="menu-item"><a href="/tags" alt="标签" title="标签" itemprop="url">标签</a></li><li itemprop="name" class="menu-item"><a href="/about" alt="关于" title="关于" itemprop="url">关于</a></li></ul></nav><div class="dynamic-slot"></div><div class="toc-body"><div class="bookmark"></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#CSS"><span class="toc-text">CSS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E8%AE%BE%E8%AE%A1%EF%BC%88Responsive-Web-Design%EF%BC%8CRWD%EF%BC%89"><span class="toc-text">响应式设计（Responsive Web Design，RWD）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2%EF%BC%88Media-Query%EF%BC%89"><span class="toc-text">媒体查询（Media Query）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%B9%E6%80%A7%E7%9B%92%E5%AD%90%EF%BC%88FlexBox%EF%BC%89"><span class="toc-text">弹性盒子（FlexBox）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSS-Grid"><span class="toc-text">CSS Grid</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E5%9B%BE%E5%BD%A2%E3%80%81%E5%AA%92%E4%BD%93"><span class="toc-text">响应式图形、媒体</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%8E%92%E7%89%88"><span class="toc-text">响应式排版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%8F%A3%E5%85%83%E6%A0%87%E8%AE%B0"><span class="toc-text">视口元标记</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Tailwind-CSS"><span class="toc-text">Tailwind CSS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSS-Module"><span class="toc-text">CSS Module</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CSS-%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%88SCSS%E3%80%81Less%EF%BC%89"><span class="toc-text">CSS 预处理器（SCSS、Less）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B4%8B%E8%91%B1%E6%A8%A1%E5%9E%8B%EF%BC%88Onion-Model%EF%BC%89"><span class="toc-text">洋葱模型（Onion Model）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BEM%EF%BC%88Block-Element-Modifier%EF%BC%89"><span class="toc-text">BEM（Block, Element, Modifier）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript"><span class="toc-text">JavaScript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-text">原型链</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E6%8C%87%E5%AE%9A%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-text">显式指定原型链</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-text">函数对象的原型链</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E7%9A%84%E2%80%9C%E9%81%AE%E7%9B%96%E2%80%9D"><span class="toc-text">属性的“遮盖”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setter-%E7%9A%84%E2%80%9C%E9%81%AE%E7%9B%96%E2%80%9D"><span class="toc-text">setter 的“遮盖”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#prototype-%E4%B8%8E-constructor-%E5%B1%9E%E6%80%A7"><span class="toc-text">prototype 与 constructor 属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#new-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">new 运算符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8"><span class="toc-text">函数作为成员方法调用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-text">深拷贝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%BC%E6%B7%B1%E6%AF%94%E8%BE%83%EF%BC%88%E5%9F%BA%E7%A1%80%E7%89%88%EF%BC%89"><span class="toc-text">值深比较（基础版）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#instanceof-%E5%A2%9E%E5%BC%BA%E5%9E%8B%E5%AE%9E%E7%8E%B0"><span class="toc-text">instanceof 增强型实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95-Promise-%E5%AE%9E%E7%8E%B0"><span class="toc-text">简单 Promise 实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reactive-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0"><span class="toc-text">Reactive 响应式基本实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">斐波那契生成器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E5%8F%96%E6%B6%88%E5%87%BD%E6%95%B0%EF%BC%882650-%E8%AE%BE%E8%AE%A1%E5%8F%AF%E5%8F%96%E6%B6%88%E5%87%BD%E6%95%B0%EF%BC%89"><span class="toc-text">可取消函数（2650. 设计可取消函数）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React"><span class="toc-text">React</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Next-js%EF%BC%88App-Router%EF%BC%89"><span class="toc-text">Next.js（App Router）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP"><span class="toc-text">HTTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node-js"><span class="toc-text">Node.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3"><span class="toc-text">其他前端相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Module-Federation"><span class="toc-text">Module Federation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redux-%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E7%8E%B0"><span class="toc-text">Redux 核心原理与实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Throttle-amp-Debounce"><span class="toc-text">Throttle &amp; Debounce</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Virtual-List-%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8"><span class="toc-text">Virtual List 虚拟列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Webpack-%E6%89%93%E5%8C%85%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-text">Webpack 打包基本原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-text">前端模块化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service-Worker-PWA"><span class="toc-text">Service Worker + PWA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-text">性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%88%86%E5%89%B2%EF%BC%88Bundle-Splitting%EF%BC%89"><span class="toc-text">代码分割（Bundle Splitting）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E4%BC%98%E5%8C%96%E6%89%8B%E6%AE%B5"><span class="toc-text">其他常用优化手段</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E6%B5%8B%E8%AF%95"><span class="toc-text">前端测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91%EF%BC%88TDD%EF%BC%89"><span class="toc-text">测试驱动开发（TDD）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%EF%BC%88Event-Loop%EF%BC%89"><span class="toc-text">事件循环（Event Loop）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E5%8A%A8%E7%94%BB"><span class="toc-text">前端动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8"><span class="toc-text">单页应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GraphQL"><span class="toc-text">GraphQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Git-%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6"><span class="toc-text">Git 代码版本控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TypeScript"><span class="toc-text">TypeScript</span></a></li></ol></li></ol></div><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><script src="https://shadow.elemecdn.com/npm/zoomage.js@latest/dist/zoomage.min.js" type="text/javascript"></script><script src="https://shadow.elemecdn.com/npm/axios@0.18.0/dist/axios.min.js" type="text/javascript"></script><script src="/scripts/post.js" type="text/javascript"></script><div class="touch-top"><span></span></div><article post-id="前端面试模版" class="full article-post"><h1 itemprop="headline" class="align-center">前端面试模版</h1><div class="content"><div class="article-meta"><span class="post-meta"><br>Created on<time itemprop="dateCreated" datetime="2025-05-23T02:34:00.000Z"> 2025 / 05 / 23, 10:34:00</time></span><span class="page-tag-anchor"><a href="/tags/前端" itemprop="url">#前端</a>&nbsp;&nbsp;<a href="/tags/面试" itemprop="url">#面试</a>&nbsp;&nbsp;</span></div><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><h3 id="响应式设计（Responsive-Web-Design，RWD）"><a href="#响应式设计（Responsive-Web-Design，RWD）" class="headerlink" title="响应式设计（Responsive Web Design，RWD）"></a>响应式设计（Responsive Web Design，RWD）</h3><h4 id="媒体查询（Media-Query）"><a href="#媒体查询（Media-Query）" class="headerlink" title="媒体查询（Media Query）"></a>媒体查询（Media Query）</h4><ul>
<li>先为窄屏设备创建简单的单列布局，然后再检查是否适用于更宽的屏幕，并在确定屏幕宽度足够处理时实现多列布局。优先考虑移动设备的设计被称为<strong>移动优先设计</strong>。</li>
</ul>
<pre class="line-numbers language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 80rem<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">/* 断点，使用相对单位 */</span>
  <span class="token selector"><span class="token class">.container</span> </span><span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">1</span>em <span class="token number">2</span>em<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="弹性盒子（FlexBox）"><a href="#弹性盒子（FlexBox）" class="headerlink" title="弹性盒子（FlexBox）"></a>弹性盒子（FlexBox）</h4><ul>
<li>通过更改 flex-grow 和 flex-shrink 控制元素在空间过大、过小时的表现形式；</li>
</ul>
<pre class="line-numbers language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">/* 配合媒体查询 */</span>
  <span class="token selector"><span class="token class">.wrapper</span> </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector"><span class="token class">.col1</span> </span><span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> <span class="token number">5%</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector"><span class="token class">.col2</span> </span><span class="token punctuation">{</span>
    <span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="CSS-Grid"><a href="#CSS-Grid" class="headerlink" title="CSS Grid"></a>CSS Grid</h4><pre class="line-numbers language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 600px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector"><span class="token class">.wrapper</span> </span><span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
    <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token number">1</span>fr <span class="token number">2</span>fr<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">/* 动态列宽度，比例 1:2 */</span>
    <span class="token property">column-gap</span><span class="token punctuation">:</span> <span class="token number">5%</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="响应式图形、媒体"><a href="#响应式图形、媒体" class="headerlink" title="响应式图形、媒体"></a>响应式图形、媒体</h4><ul>
<li>使用支持响应式图像的 &lt;img&gt; 标签（利用 srcset 和 sizes 属性），可以让浏览器根据设备的屏幕分辨率或视口宽度，自动选择最合适的图片资源，实现更快加载、清晰显示和节省带宽。</li>
</ul>
<pre class="line-numbers language-css"><code class="language-css"><span class="token selector">img,
picture,
video </span><span class="token punctuation">{</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/* 确保媒体永远不会大于其响应容器 */</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="响应式排版"><a href="#响应式排版" class="headerlink" title="响应式排版"></a>响应式排版</h4><ul>
<li>基于媒体查询：</li>
</ul>
<pre class="line-numbers language-css"><code class="language-css"><span class="token selector">html </span><span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">1</span>em<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">h1 </span><span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">2</span>rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 1200px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">h1 </span><span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">4</span>rem<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>基于视口单位：</li>
</ul>
<pre class="line-numbers language-css"><code class="language-css"><span class="token selector">h1 </span><span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">1.5</span>rem + <span class="token number">4</span>vw<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/* 1vw 等于视口宽度的百分之一 */</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h4 id="视口元标记"><a href="#视口元标记" class="headerlink" title="视口元标记"></a>视口元标记</h4><pre class="line-numbers language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!-- 将视口的宽度设置为设备宽度，并将文档缩放到其预期大小的 100% --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width,initial-scale<span class="token punctuation">=</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="Tailwind-CSS"><a href="#Tailwind-CSS" class="headerlink" title="Tailwind CSS"></a>Tailwind CSS</h3><ul>
<li>Tailwind 提供了原子化的「实用类」，一个类对应一个样式，通过组合可以灵活实现各种样式。</li>
<li>代码即样式，可读性高；</li>
<li>Tailwind 配置中定义了统一的颜色、间距、字体等设计系统；</li>
<li>内置响应式断点类，写法简洁：</li>
</ul>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text-sm md:text-lg lg:text-xl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Responsive Text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="CSS-Module"><a href="#CSS-Module" class="headerlink" title="CSS Module"></a>CSS Module</h3><ul>
<li>目的：为每个 CSS 类名生成一个作用于当前模块的唯一标识符，从而实现“样式隔离”；</li>
<li>工作流程：<ul>
<li>编写 *.module.css 文件；</li>
<li>构建工具读取该文件，为每个类名生成一个全局唯一类名。类名中的 hash 部分通常基于 CSS 模块文件路径、类名，甚至文件内容生成，可以保证最终类名的唯一性；</li>
<li>生成「原始类名 -&gt; 唯一类名」的映射对象（JS）；</li>
<li>在组件中通过原始类名嵌入唯一类名；</li>
<li>React 根据唯一类名找到 CSS 样式。</li>
</ul>
</li>
</ul>
<h3 id="CSS-预处理器（SCSS、Less）"><a href="#CSS-预处理器（SCSS、Less）" class="headerlink" title="CSS 预处理器（SCSS、Less）"></a>CSS 预处理器（SCSS、Less）</h3><ul>
<li>目的：让 CSS 更像“程序语言”一样强大、可复用、结构清晰；</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h4 id="洋葱模型（Onion-Model）"><a href="#洋葱模型（Onion-Model）" class="headerlink" title="洋葱模型（Onion Model）"></a>洋葱模型（Onion Model）</h4><p><img src="11.png"></p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span>middlewares<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> middlewares<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>prev<span class="token punctuation">,</span> cur<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> next <span class="token operator">=</span><span class="token operator">></span> <span class="token function">prev</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">cur</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="BEM（Block-Element-Modifier）"><a href="#BEM（Block-Element-Modifier）" class="headerlink" title="BEM（Block, Element, Modifier）"></a>BEM（Block, Element, Modifier）</h4><ul>
<li>一种 CSS 命名规范，为了写出可读性强、结构清晰、易维护的 CSS 类名；</li>
</ul>
<pre class="line-numbers language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>card card--featured<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>card__title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Article Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>card__content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Some content here...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-css"><code class="language-css"><span class="token comment" spellcheck="true">/**
  .block {}                  // 块；
  .block__element {}         // 元素（block 的子部分）；
  .block--modifier {}        // 修饰符（block 的一种状态）；
  .block__element--modifier  // 元素的状态。
*/</span>
<span class="token selector"><span class="token class">.card</span> </span><span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token hexcode">#ddd</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.card--featured</span> </span><span class="token punctuation">{</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> gold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.card__title</span> </span><span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">.card__content</span> </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#666</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><ul>
<li>文章：<b><a target="_blank" rel="noopener" href="https://mrotaru.co.uk/blog/javascript-prototypes/">JavaScript Prototypes</a></b>；</li>
</ul>
<p><p><img src="5.png" alt="原型链"><span class="pic-desc">原型链</span></p></p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token operator">===</span> Object<span class="token punctuation">.</span>prototype  <span class="token comment" spellcheck="true">// true</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token keyword">null</span>  <span class="token comment" spellcheck="true">// true</span>
foo<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// true</span>
foo<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'toString'</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// false</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>对象通过内部槽 <strong>[[Prototype]]</strong> 指向其构造函数的 prototype 对象；</li>
</ul>
<h4 id="显式指定原型链"><a href="#显式指定原型链" class="headerlink" title="显式指定原型链"></a>显式指定原型链</h4><p><p><img src="6.png" alt="显式指定原型链"><span class="pic-desc">显式指定原型链</span></p></p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">let</span> bar <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 将 foo 作为 bar 的隐式原型；</span>
foo<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// true</span>
Object<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// true</span>
<span class="token comment" spellcheck="true">// let bar = {}</span>
<span class="token comment" spellcheck="true">// Object.setPrototypeOf(bar, foo)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>通过 <code>Object.create</code> 可以显式修改对象的隐式原型链；</li>
</ul>
<h4 id="函数对象的原型链"><a href="#函数对象的原型链" class="headerlink" title="函数对象的原型链"></a>函数对象的原型链</h4><p><p><img src="7.png" alt="函数对象的原型链"><span class="pic-desc">函数对象的原型链</span></p></p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>JS 函数是“头等对象（First-class Objects）”，意味着它们具有类似普通对象一样的特征：<ul>
<li>可作为参数传递；</li>
<li>原型链继承自 Object.prototype。</li>
</ul>
</li>
</ul>
<h4 id="属性的“遮盖”"><a href="#属性的“遮盖”" class="headerlink" title="属性的“遮盖”"></a>属性的“遮盖”</h4><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>foo<span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> writable<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token number">40</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 只读属性；</span>
<span class="token keyword">let</span> bar <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">100</span>  <span class="token comment" spellcheck="true">// 不会遮盖位于 foo 上的同名属性；</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">.</span>x<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 40</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>位于最近原型链上的属性会“遮盖（Shadowing）”位于上层原型链的同名属性。</li>
<li>位于原型链上的只读属性无法被“遮盖”；</li>
</ul>
<h4 id="setter-的“遮盖”"><a href="#setter-的“遮盖”" class="headerlink" title="setter 的“遮盖”"></a>setter 的“遮盖”</h4><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">set</span> <span class="token function">myProp</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> v <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span>
bar<span class="token punctuation">.</span>myProp <span class="token operator">=</span> <span class="token number">10</span>  <span class="token comment" spellcheck="true">// setter 被调用；</span>
bar<span class="token punctuation">.</span>x <span class="token operator">===</span> <span class="token number">11</span>  <span class="token comment" spellcheck="true">// true</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>位于原型链上的 setter 不会被遮盖，反而会被调用；</li>
</ul>
<h4 id="prototype-与-constructor-属性"><a href="#prototype-与-constructor-属性" class="headerlink" title="prototype 与 constructor 属性"></a>prototype 与 constructor 属性</h4><p><p><img src="8.png" alt="函数对象的原型链"><span class="pic-desc">函数对象的原型链</span></p></p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
foo<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> foo  <span class="token comment" spellcheck="true">// true</span>
foo<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">42</span>
foo<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">100</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token operator">===</span> Function<span class="token punctuation">.</span>prototype  <span class="token comment" spellcheck="true">// true</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>x  <span class="token comment" spellcheck="true">// 42</span>
obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> foo  <span class="token comment" spellcheck="true">// true</span>
foo<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// true</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>constructor 属性不参与新对象的创建过程，只用来反向查找某个对象的构造函数是什么；</li>
<li>函数对象的 prototype 属性用于放置，需要以该函数对象作为构造函数创建出的对象继承的属性；<ul>
<li>[[prototype]]：<strong>真实的原型链</strong>，查找属性时的遍历路径；</li>
<li>prototype 属性：<strong>可能的原型链</strong>，当生成新对象时可能会继承。</li>
</ul>
</li>
<li>在构造函数的函数体执行前，JS 引擎就会将 this 指向新创建的对象。而当构造函数执行后，this 被隐式返回；</li>
</ul>
<h4 id="new-运算符"><a href="#new-运算符" class="headerlink" title="new 运算符"></a>new 运算符</h4><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 使用 new 创建新对象；</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>foo<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 设置原型链继承，返回空对象；</span>
foo<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 执行 foo 构造函数，this 指向 obj；</span>
<span class="token keyword">return</span> obj
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h4 id="函数作为成员方法调用"><a href="#函数作为成员方法调用" class="headerlink" title="函数作为成员方法调用"></a>函数作为成员方法调用</h4><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*</span><span class="token operator">=</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> bar<span class="token punctuation">:</span> foo <span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// foo 中的 this 指向 obj；</span>
obj<span class="token punctuation">.</span>x <span class="token operator">===</span> <span class="token number">20</span>  <span class="token comment" spellcheck="true">// true</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h3><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj
  <span class="token keyword">const</span> clone <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 注意 for..in 会迭代自身和原型链上的可枚举属性；</span>
      clone<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> clone
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="值深比较（基础版）"><a href="#值深比较（基础版）" class="headerlink" title="值深比较（基础版）"></a>值深比较（基础版）</h3><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">areDeeplyEqual</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>o1 <span class="token operator">===</span> o2<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>o1 <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> o2 <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span> <span class="token operator">!==</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>

  <span class="token keyword">const</span> key1 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>o1<span class="token punctuation">)</span>
  <span class="token keyword">const</span> key2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>o2<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>key1<span class="token punctuation">.</span>length <span class="token operator">!==</span> key2<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> key1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>o2<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">areDeeplyEqual</span><span class="token punctuation">(</span>o1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> o2<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span> 
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="instanceof-增强型实现"><a href="#instanceof-增强型实现" class="headerlink" title="instanceof 增强型实现"></a>instanceof 增强型实现</h3><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">checkIfInstanceOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> classFunction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> undefined <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>classFunction <span class="token operator">===</span> undefined <span class="token operator">||</span> classFunction <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> proto <span class="token operator">=</span> obj<span class="token punctuation">.</span>__proto__
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> classFunction<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
    obj <span class="token operator">=</span> obj<span class="token punctuation">.</span>__proto__
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>*.prototype.__proto__ 通常等于 Object.prototype，因为 prototype 本身就是一个普通对象，类似于通过 <code>new Object()</code> 产生的对象；</li>
<li><strong>Object 是一个函数</strong>，所以 Object.__proto__ 等于 Function.prototype。Function 也类似。</li>
</ul>
<h3 id="简单-Promise-实现"><a href="#简单-Promise-实现" class="headerlink" title="简单 Promise 实现"></a>简单 Promise 实现</h3><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 使用方；</span>
<span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span> 
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'First resolved!'</span><span class="token punctuation">)</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token string">'Second resolved!'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Third resolved!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 实现方 - 仅处理了 fulfilled 状态；</span>
<span class="token comment" spellcheck="true">// 1. rejected 状态的处理；</span>
<span class="token comment" spellcheck="true">// 2. then 回调函数应该按照微任务执行（queueMicrotask）;</span>
<span class="token comment" spellcheck="true">// 3. 错误处理逻辑。</span>
<span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{</span>
  #value <span class="token operator">=</span> <span class="token keyword">null</span>
  #state <span class="token operator">=</span> <span class="token string">'pending'</span>
  #callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>executor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> resolve <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#state <span class="token operator">!=</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>#value <span class="token operator">=</span> value
      <span class="token keyword">this</span><span class="token punctuation">.</span>#state <span class="token operator">=</span> <span class="token string">'fulfilled'</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>#callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>cb <span class="token operator">=</span><span class="token operator">></span> <span class="token function">cb</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 异步 resolve 时被调用；</span>
    <span class="token punctuation">}</span>
    <span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">then</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> handleFulfilled <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#value<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#state <span class="token operator">===</span> <span class="token string">'fulfilled'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">handleFulfilled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 同步 resolve 时被调用；</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>#callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handleFulfilled<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Reactive-响应式基本实现"><a href="#Reactive-响应式基本实现" class="headerlink" title="Reactive 响应式基本实现"></a>Reactive 响应式基本实现</h3><p>当数据变化时，系统能自动追踪依赖并更新相关视图或逻辑，无需手动管理更新。基本原理：<strong>通过 Proxy 自动追踪依赖、触发更新</strong>。</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">let</span> activeEffect <span class="token operator">=</span> <span class="token keyword">null</span>

<span class="token keyword">function</span> <span class="token function">effect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 添加依赖入口；</span>
  activeEffect <span class="token operator">=</span> fn
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  activeEffect <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// target (响应式对象) → Map (属性名 → Set(effect 函数))；</span>
<span class="token comment" spellcheck="true">// 保持对响应式对象的弱引用，不影响 GC；</span>
<span class="token keyword">const</span> targetMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">track</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 收集依赖；</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeEffect<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token keyword">let</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    depsMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    targetMap<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> depsMap<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> deps <span class="token operator">=</span> depsMap<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>deps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    deps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    depsMap<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> deps<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  deps<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>activeEffect<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">trigger</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 找到对应的 effects，全部重新调用；</span>
  <span class="token keyword">const</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>depsMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> deps <span class="token operator">=</span> depsMap<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>deps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> effect <span class="token keyword">of</span> deps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">track</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 当触发某个 effect 时，开始收集依赖；</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
      <span class="token function">trigger</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">++</span>state<span class="token punctuation">.</span>count
<span class="token operator">++</span>state<span class="token punctuation">.</span>count
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="斐波那契生成器"><a href="#斐波那契生成器" class="headerlink" title="斐波那契生成器"></a>斐波那契生成器</h3><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 调用后返回一个迭代器，可以用 for...of 遍历；</span>
<span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">fibGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> dp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token punctuation">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> idx<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> idx<span class="token punctuation">)</span>
  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">yield</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">yield</span> dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> dp<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span>
    <span class="token keyword">yield</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="可取消函数（2650-设计可取消函数）"><a href="#可取消函数（2650-设计可取消函数）" class="headerlink" title="可取消函数（2650. 设计可取消函数）"></a>可取消函数（<a target="_blank" rel="noopener" href="https://leetcode.cn/problems/design-cancellable-function/">2650. 设计可取消函数</a>）</h3><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">cancellable</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> shouldCancel <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token keyword">let</span> cancel <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    shouldCancel <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token comment" spellcheck="true">// AbortController 取消 Promise 的本质是 Promise 在内部监听了 signal 的 abort 事件，-</span>
  <span class="token comment" spellcheck="true">// 然后借此通过 reject 取消 Promise。无法从外部直接取消任何 Promise；</span>
  <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> driver <span class="token operator">=</span> <span class="token punctuation">(</span>input <span class="token operator">=</span> undefined<span class="token punctuation">,</span> isThrow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> p
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// generator.next 传入一个值作为上一个 yield 的结果，并返回下一个 yield / return 的值（通过 done 字段区分）；</span>
        <span class="token comment" spellcheck="true">// generator.throw 传入一个值作为 catch 原因，并返回下一个 yield 的值；</span>
        p <span class="token operator">=</span> isThrow <span class="token operator">?</span> generator<span class="token punctuation">.</span><span class="token keyword">throw</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token punctuation">:</span> generator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      
      p<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>shouldCancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">driver</span><span class="token punctuation">(</span><span class="token string">'Cancelled'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">driver</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 继续处理下一个 Promise / return；</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>shouldCancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">driver</span><span class="token punctuation">(</span><span class="token string">'Cancelled'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">driver</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 返回错误，并继续处理下一个 Promise / return；</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">driver</span><span class="token punctuation">(</span>undefined<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>
    cancel<span class="token punctuation">,</span> 
    promise<span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h2 id="Next-js（App-Router）"><a href="#Next-js（App-Router）" class="headerlink" title="Next.js（App Router）"></a>Next.js（App Router）</h2><ul>
<li>Next.js 使用基于文件系统的路由，意味着文件的组织结构直接映射了可用路由（路由位置上的 page.tsx 必须存在）；</li>
<li>默认情况下，Layout 和 Page 是 React 服务器组件，对应两种 SSR 方式：<ul>
<li>静态渲染（Static Rendering）：在编译或缓存重验证时进行。结果会被缓存；</li>
<li>动态渲染（Dynamic Rendering）：在收到请求时进行，结果不会缓存。</li>
</ul>
</li>
<li>Next.js 的 &lt;Link&gt; 组件会在用户进入路由所在视口时，自动预取路由对应页面的内容；</li>
<li>当提供 loading.tsx 时，Next.js 会启动流式渲染（Streaming SSR），即先渲染占位 Loading，再异步渲染主体部分；</li>
<li>Next.js SSR 基本流程：<ul>
<li>服务器组件在后端被渲染为静态 HTML + RSC Payload（描述组件信息）；</li>
<li>浏览器收到 HTML 优先显示骨架；</li>
<li>浏览器下载 JS（包含客户端组件），并使用 RSC Payload 将服务器组件渲染整合入客户端组件；</li>
<li>最后，JS 水合客户端组件，将事件绑定和状态注入，让它们变得可交互。</li>
</ul>
</li>
<li><strong>Server Action 将服务端逻辑直接嵌入组件</strong>，可用于表单提交、数据操作等，不再需要手动创建 API 路由和使用 fetch。它是比 HTTP 请求更上层的一种抽象，隐藏了底层网络细节，让你像调用本地函数一样调用服务端逻辑。所以不适合基于 HTTP 上层其他应用协议的数据交互形式；</li>
</ul>
<h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><ul>
<li><a href="/2021/02/19/%E3%80%8AHTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%88%E7%AC%AC-1-6-%E7%AB%A0%EF%BC%89/">《HTTP 权威指南》读书笔记（第 1-6 章）</a>；</li>
<li><a href="/2021/02/22/%E3%80%8AHTTP-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%88%E7%AC%AC-7-15%E3%80%8120-%E7%AB%A0%EF%BC%89/">《HTTP 权威指南》读书笔记（第 7-20 章）+ HTTP2 / QUIC</a>；</li>
</ul>
<h2 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h2><ul>
<li><a href="/2023/06/05/Nodejs-Internal/">Node.js Internal</a>；</li>
</ul>
<h2 id="其他前端相关"><a href="#其他前端相关" class="headerlink" title="其他前端相关"></a>其他前端相关</h2><h3 id="Module-Federation"><a href="#Module-Federation" class="headerlink" title="Module Federation"></a>Module Federation</h3><p><p><img src="10.webp" alt="微前端架构"><span class="pic-desc">微前端架构</span></p></p>
<p>Module Federation 是 Webpack5（其他构建工具也提供类似支持）引入的一种模块共享机制，允许多个独立构建的应用<strong>在运行时动态加载和共享代码</strong>。适用于微前端架构，多个不同团队采用不同技术栈，最后在应用层通过 MF 进行功能整合。</p>
<h3 id="Redux-核心原理与实现"><a href="#Redux-核心原理与实现" class="headerlink" title="Redux 核心原理与实现"></a>Redux 核心原理与实现</h3><p>统一状态对象树（state），关注者设置订阅，发布者通过分发（dispatch）action 进行状态变更，dispatch 通过 action.type 找到对应 reducer，结合 action.data 完成状态变更并返回新的全局状态树，最后依次通知所有订阅者状态发生变化。</p>
<ul>
<li><strong>单一状态树</strong>：应用的所有状态保存在一个对象树中，方便管理和调试；</li>
<li><strong>状态只读</strong>：状态只能通过 dispatch(action) 更新，不能直接修改；</li>
<li><strong>纯函数更新</strong>：reducer 是一个纯函数，确保状态更新逻辑可预测。</li>
</ul>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> state <span class="token comment" spellcheck="true">// 保存单一状态树；</span>
  <span class="token keyword">let</span> listeners <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// 保存订阅者；</span>

  <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> state <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// 获取当前状态；</span>

  <span class="token comment" spellcheck="true">// 派发 Action；</span>
  <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// { type, data, }</span>
    state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 根据 reducer 更新状态；</span>
    listeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">listener</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 通知所有订阅者；</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">subscribe</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    listeners<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 添加订阅者；</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// 返回取消订阅函数；</span>
      listeners <span class="token operator">=</span> listeners<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> l <span class="token operator">!==</span> listener<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span> getState<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> subscribe <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// Reducer 示例；</span>
<span class="token keyword">function</span> <span class="token function">counterReducer</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'INCREMENT'</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token string">'DECREMENT'</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>counterReducer<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 使用 Store；</span>

<span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 订阅状态变化；</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'State changed:'</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 派发 Action；</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'INCREMENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// 输出: State changed: { count: 1 }</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'INCREMENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// 输出: State changed: { count: 2 }</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'DECREMENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">// 输出: State changed: { count: 1 }</span>

<span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 取消订阅；</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'INCREMENT'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 不会输出订阅信息；</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Throttle-amp-Debounce"><a href="#Throttle-amp-Debounce" class="headerlink" title="Throttle &amp; Debounce"></a>Throttle &amp; Debounce</h3><ul>
<li>Throttle（节流）：限制函数在<strong>指定时间间隔内只能执行一次</strong>。适合高频触发场景，控制触发次数，比如：限制重试按钮的实际触发频率；</li>
</ul>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 毫秒；</span>
  <span class="token keyword">let</span> lastTime <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> lastTime <span class="token operator">>=</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
      lastTime <span class="token operator">=</span> now
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>Debounce（去抖动）：延迟函数执行，只有<strong>在指定时间内没有再次触发时才会执行</strong>。适合用户输入或操作停止后处理，比如：搜索框输入、自动保存、滚动事件。</li>
</ul>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// 事件触发后至少等待特定时间再执行；</span>
      fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Virtual-List-虚拟列表"><a href="#Virtual-List-虚拟列表" class="headerlink" title="Virtual List 虚拟列表"></a>Virtual List 虚拟列表</h3><p><p><img src="9.png" alt="虚拟列表基本原理"><span class="pic-desc">虚拟列表基本原理</span></p></p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> itemHeight <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">// 每个列表项高度；</span>
<span class="token keyword">const</span> visibleCount <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// 可视区域最多显示多少个项；</span>
<span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>              <span class="token comment" spellcheck="true">// 上下额外渲染几项做缓冲，避免滚动闪烁；</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> VirtualList <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> items <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token keyword">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token punctuation">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token template-string"><span class="token string">`Item </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">=</span> props
  <span class="token keyword">const</span> containerRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>scrollTop<span class="token punctuation">,</span> setScrollTop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> 

  <span class="token comment" spellcheck="true">// 核心逻辑；</span>
  <span class="token keyword">const</span> startIdx <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>scrollTop <span class="token operator">/</span> itemHeight<span class="token punctuation">)</span> <span class="token operator">-</span> buffer<span class="token punctuation">)</span>
  <span class="token keyword">const</span> endIdx <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>items<span class="token punctuation">.</span>length<span class="token punctuation">,</span> startIdx <span class="token operator">+</span> visibleCount <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> buffer<span class="token punctuation">)</span>
  <span class="token keyword">const</span> visibleItems <span class="token operator">=</span> items<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>startIdx<span class="token punctuation">,</span> endIdx<span class="token punctuation">)</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ref <span class="token operator">=</span> containerRef<span class="token punctuation">.</span>current
    <span class="token keyword">let</span> ticking <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">const</span> onScroll <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ticking<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          <span class="token function">setScrollTop</span><span class="token punctuation">(</span>ref<span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 获得相对于父容器的滚动距离，决定现在屏幕顶端是第几个 item；</span>
          ticking <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        ticking <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ref<span class="token punctuation">)</span> ref<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> onScroll<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
      ref<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> onScroll<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div
      ref<span class="token operator">=</span><span class="token punctuation">{</span>containerRef<span class="token punctuation">}</span>
      style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
        height<span class="token punctuation">:</span> visibleCount <span class="token operator">*</span> itemHeight<span class="token punctuation">,</span>
        width<span class="token punctuation">:</span> <span class="token string">'100px'</span><span class="token punctuation">,</span>
        overflowY<span class="token punctuation">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
        border<span class="token punctuation">:</span> <span class="token string">'1px solid #ccc'</span><span class="token punctuation">,</span>
        position<span class="token punctuation">:</span> <span class="token string">'relative'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">></span>
      <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* 渲染滚动条 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
        height<span class="token punctuation">:</span> items<span class="token operator">?</span><span class="token punctuation">.</span>length <span class="token operator">*</span> itemHeight<span class="token punctuation">,</span>
        position<span class="token punctuation">:</span> <span class="token string">'relative'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token comment" spellcheck="true">/* 渲染列表项 */</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>
          visibleItems<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> realIdx <span class="token operator">=</span> startIdx <span class="token operator">+</span> index
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>div 
                key<span class="token operator">=</span><span class="token punctuation">{</span>realIdx<span class="token punctuation">}</span>
                style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                  position<span class="token punctuation">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>
                  height<span class="token punctuation">:</span> itemHeight<span class="token punctuation">,</span>
                  willChange<span class="token punctuation">:</span> <span class="token string">'transform'</span><span class="token punctuation">,</span>
                  transform<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`translateY(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>realIdx <span class="token operator">*</span> itemHeight<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)`</span></span><span class="token punctuation">,</span>  
                <span class="token punctuation">}</span><span class="token punctuation">}</span>
              <span class="token operator">></span>
                <span class="token punctuation">{</span>item<span class="token punctuation">}</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Webpack-打包基本原理"><a href="#Webpack-打包基本原理" class="headerlink" title="Webpack 打包基本原理"></a>Webpack 打包基本原理</h3><ol>
<li><strong>读取配置</strong>；</li>
<li><strong>构建依赖图</strong>：从 entry 入口文件出发，递归地分析模块依赖关系，构建一个模块依赖图。</li>
</ol>
<ul>
<li>解析每个模块（包括 import、require、动态导入）；</li>
<li>通过 AST（抽象语法树）分析依赖；</li>
<li>递归分析子依赖模块；</li>
<li>形成一张模块图（有向图），节点是模块，边是依赖关系。</li>
</ul>
<ol start="3">
<li><strong>模块转换</strong>：通过相应的 Loader 转换 JS 能识别的模块；</li>
<li><strong>模块打包</strong>：</li>
</ol>
<ul>
<li>动态导入（import()）会被打包为分离的 chunk，形成代码分割（code splitting）；</li>
<li>最终输出静态资源文件（Bundle）。</li>
</ul>
<ol start="5">
<li><strong>插件机制</strong>：插件钩子机制，支持在生命周期的不同阶段插入自定义逻辑。</li>
<li><strong>输出</strong>：将构建好的文件输出到 output.path 指定目录，完成打包过程。</li>
</ol>
<h3 id="前端模块化"><a href="#前端模块化" class="headerlink" title="前端模块化"></a>前端模块化</h3><p>CommonJS、AMD 和 ES Modules 是 JavaScript 中的三种模块化规范。</p>
<div class="table-container"><table>
<thead>
<tr>
<th>特性</th>
<th>CommonJS</th>
<th>AMD</th>
<th>ES Modules</th>
</tr>
</thead>
<tbody><tr>
<td>加载方式</td>
<td>同步</td>
<td>异步</td>
<td>异步</td>
</tr>
<tr>
<td>使用环境</td>
<td>Node.js</td>
<td>浏览器</td>
<td>浏览器 + Node</td>
</tr>
<tr>
<td>支持静态分析</td>
<td>❌</td>
<td>❌</td>
<td>✅（基于严格的语法和语义限制）</td>
</tr>
<tr>
<td>是否原生</td>
<td>Node.js 原生</td>
<td>需库支持</td>
<td>现代浏览器原生</td>
</tr>
<tr>
<td>语法</td>
<td>require()</td>
<td>define() 定义模块、require() 加载模块</td>
<td>import/export</td>
</tr>
</tbody></table></div>
<ul>
<li>UMD 是一种“<strong>模块适配层</strong>”，不是语法规范。它是为“<strong>发布通用 JS 库</strong>”而生的模块包装格式，核心目标是让代码“在任何环境中都能跑”。</li>
</ul>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>root<span class="token punctuation">,</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// AMD；</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// CommonJS；</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// 浏览器全局变量；</span>
    root<span class="token punctuation">.</span>MyLibrary <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> self <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// 模块实现代码；</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    hello<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello from UMD!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="Service-Worker-PWA"><a href="#Service-Worker-PWA" class="headerlink" title="Service Worker + PWA"></a>Service Worker + PWA</h3><ul>
<li>文章：<b><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers">Service Worker - MDN</a></b>；</li>
</ul>
<p>Service Worker 是一种在后台运行（独立于网页）的特殊 JavaScript 工作线程，它的基本能力：</p>
<ul>
<li><strong>缓存响应</strong>：拦截请求并返回缓存的资源（例如 HTML、CSS、JavaScript 文件）；</li>
<li><strong>修改请求或响应</strong>：动态生成或替换请求的响应内容；</li>
<li><strong>控制网络流量</strong>：决定某些请求是否发送到服务器，或者完全阻止某些请求；</li>
<li><strong>离线支持</strong>：如果网络不可用，则直接从本地缓存中获取资源，无需发起网络请求。</li>
</ul>
<p>PWA（Progressive Web App）基于 SW 构建，它的核心目标是让网页拥有类似原生应用的流畅体验，同时无需安装。</p>
<h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><p><p><img src="1.png" alt="前端常用性能指标"><span class="pic-desc">前端常用性能指标</span></p></p>
<h4 id="代码分割（Bundle-Splitting）"><a href="#代码分割（Bundle-Splitting）" class="headerlink" title="代码分割（Bundle Splitting）"></a>代码分割（Bundle Splitting）</h4><p>Bundle Splitting 关键在于代码切分点的合理选取，以及对应的懒加载机制。</p>
<ul>
<li>提升首屏加载速度：只加载首屏需要的代码，其他代码按需加载（lazy-loading）；</li>
<li>更高的缓存命中率：未变化的子包请求可以利用缓存（更细的代码粒度，更好地缓存）；</li>
</ul>
<h4 id="其他常用优化手段"><a href="#其他常用优化手段" class="headerlink" title="其他常用优化手段"></a>其他常用优化手段</h4><ul>
<li>资源优化：<ul>
<li>代码、图片等<strong>资源压缩</strong>；</li>
<li><strong>Tree Shaking</strong> 分析 ES Module 的静态依赖关系，移除无用代码。要注意的是，<strong>默认情况下，Webpack 认为所有模块都具有副作用</strong>，因此哪怕在当前文件中没有使用 import 文件导出的任何内容，该 import 也不会被移除。</li>
</ul>
</li>
<li>加载优化：<ul>
<li>提前加载关键资源或预测用户行为：<ul>
<li><strong>preload</strong>：当前页面即将使用的资源（优先级高）；</li>
<li><strong>prefetch</strong>：未来可能使用的资源（低优先级）；</li>
</ul>
</li>
<li>异步加载 JS 脚本、不阻塞 DOM 渲染：<ul>
<li><strong>defer</strong>：页面解析完再按顺序执行；</li>
<li><strong>async</strong>：下载完成立即执行，可能打断渲染；</li>
</ul>
</li>
<li>代码分割，<strong>按需懒加载</strong>；</li>
<li><strong>首屏关键 CSS 内联</strong>，提升 FCP。</li>
</ul>
</li>
<li>网络优化：<ul>
<li><strong>HTTP/2</strong>、<strong>HTTP/3</strong>：支持多路复用、减少 HTTP 和 TCP 层的队头阻塞；</li>
<li><strong>CDN 加速</strong>：就近缓存静态资源，加速访问；</li>
<li>服务端开启 <strong>Gzip 等压缩策略</strong>。</li>
</ul>
</li>
<li>渲染优化：<ul>
<li><strong>SSR</strong>、<strong>SSG</strong>（Static Site Generation，构建时渲染成 HTML）提高首屏渲染速度；</li>
<li><strong>图片懒加载</strong>（loading=”lazy”），进入视口时再加载、尺寸固定避免 reflow；</li>
</ul>
</li>
<li>运行时优化：<ul>
<li>使用 React 中的 <strong>Memoization</strong>，减少组件重新渲染；</li>
<li>使用<strong>虚拟列表</strong>优化长列表；</li>
<li>使用 <strong>requestAnimationFrame</strong> 替代 setTimeout 控制动画；</li>
<li>合理使用<strong>防抖</strong>、<strong>节流</strong>；</li>
<li>使用 <strong>GPU 加速的 CSS 属性</strong>（transform \ opacity）；</li>
<li>使用 <strong>Web Worker</strong> 优化任务执行（比如配合 OffscreenCanvas 将图形计算任务从主线程剥离）；</li>
<li>使用 <strong>requestIdleCallback</strong> 在浏览器空闲时间处理非紧急任务；</li>
<li>使用 CSS 中的 <strong>will-change 属性</strong>提前告知元素的哪些属性将要发生变化。</li>
</ul>
</li>
</ul>
<h3 id="前端测试"><a href="#前端测试" class="headerlink" title="前端测试"></a>前端测试</h3><p><p><img src="2.png" alt="前端基本测试流程"><span class="pic-desc">前端基本测试流程</span></p></p>
<h4 id="测试驱动开发（TDD）"><a href="#测试驱动开发（TDD）" class="headerlink" title="测试驱动开发（TDD）"></a>测试驱动开发（TDD）</h4><ul>
<li>三步走流程：<ul>
<li>编写失败的测试用例（Red）；</li>
<li>实现功能使测试通过（Green）；</li>
<li>重构代码（Refactor）。</li>
</ul>
</li>
<li>优势：保证代码可靠，能写出可测试代码；</li>
<li>劣势：时间成本增加（初期和后期维护，尤其当功能和 UI 频繁变化时）。</li>
</ul>
<h3 id="事件循环（Event-Loop）"><a href="#事件循环（Event-Loop）" class="headerlink" title="事件循环（Event Loop）"></a>事件循环（Event Loop）</h3><p><p><img src="3.gif" alt="JS 事件循环"><span class="pic-desc">JS 事件循环</span></p></p>
<ul>
<li>JS 单线程执行模型的问题：一次只能执行一个任务，导致某些复杂操作可能阻塞 UI 的及时更新。</li>
<li><b><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=eiC58R16hb8">JavaScript Visualized - Event Loop, Web APIs, (Micro)task Queue</a></b>；</li>
<li>JS 中<strong>帧的生命周期</strong>：</li>
</ul>
<div class="table-container"><table>
<thead>
<tr>
<th>步骤</th>
<th>描述</th>
<th>回调类型</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>JS 微任务队列执行（优先级高）</td>
<td>Promise.then、queueMicrotask、MutationObserver 等</td>
</tr>
<tr>
<td>2</td>
<td>JS 宏任务执行（优先级低）</td>
<td>setTimeout、setInterval 等</td>
</tr>
<tr>
<td>3</td>
<td>requestAnimationFrame 执行</td>
<td>在浏览器准备开始绘制前执行</td>
</tr>
<tr>
<td>4</td>
<td>浏览器执行布局、绘制（Layout + Paint）</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>如果还有时间，执行 requestIdleCallback</td>
<td>空闲时间任务</td>
</tr>
</tbody></table></div>
<h3 id="前端动画"><a href="#前端动画" class="headerlink" title="前端动画"></a>前端动画</h3><p>requestAnimationFrame 能够确保<strong>动画在浏览器下一帧绘制之前被调用，与显示器刷新率同步，同时避免掉帧和资源浪费</strong>。而 setInteval 则需要人工指定固定的动画执行频率，帧率不精准（受宏任务调度影响），不受页面可见性影响（不节能）。</p>
<p>requestAnimationFrame 回调接收一个 DOMHighResTimeStamp 类型的时间戳（微秒级别、相对时间、单调递增），<strong>表示上一帧渲染的结束时间</strong>。利用这个参数，我们可以展示\控制动画进度、进行性能监控：</p>
<pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">const</span> performanceMonitor <span class="token operator">=</span> <span class="token punctuation">{</span>
  frames<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token function">monitor</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>frames<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>frames<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>frames<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment" spellcheck="true">// 计算平均帧时间；</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>frames<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> totalTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>frames<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>frames<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>frames<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      <span class="token keyword">const</span> avgFrameTime <span class="token operator">=</span> totalTime <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>frames<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> avgFPS <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">/</span> avgFrameTime
      
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Average FPS: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>avgFPS<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">monitor</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>操作系统或 GPU 每隔一帧（16.6ms）发出一次 <strong>VSync 信号</strong>，浏览器内部的 Frame Scheduler（帧调度器）监听该信号。触发后，浏览器开始准备调度 rAF 回调函数，并准备进行 DOM 更新、样式计算、布局、绘制。</p>
<h3 id="单页应用"><a href="#单页应用" class="headerlink" title="单页应用"></a>单页应用</h3><p>SPA（Single Page Application，单页应用）的整个应用在加载初始 HTML 页面之后，后续的所有页面更新都通过 JavaScript 在客户端完成，而不需要重新加载整个页面。</p>
<ul>
<li>路由：<ul>
<li><strong>Hash 路由</strong>：通过 <code>window.onhashchange</code> 监听 hash 变化，切换页面；</li>
<li><strong>History 路由</strong>：基于 HTML5 的 History API，页面变化基于真实的 URL 路径变化。但需要服务器支持（URL Rewrite），当访问不同路径时均返回 index.html。</li>
</ul>
</li>
<li>SEO 优化：<ul>
<li>SSR、SSG；</li>
<li>动态渲染：判断请求方如果是爬虫，则返回完整快照；</li>
<li>配置 sitemap.xml、robots.txt。</li>
</ul>
</li>
</ul>
<h3 id="GraphQL"><a href="#GraphQL" class="headerlink" title="GraphQL"></a>GraphQL</h3><p><p><img src="4.png" alt="GraphQL"><span class="pic-desc">GraphQL</span></p></p>
<p>REST 是基于 HTTP 协议的一种 API 架构模式，它使用 HTTP 类型及请求状态来表示资源的处理方式（动作）及处理结果，通过仅带有名词的 URL 来表示请求的资源类型，因此我们可以说 <strong>REST 基于「资源」来设计 API</strong>。而 <strong>GraphQL 则是围绕「数据需求」和「查询」设计 API</strong> 的查询语言。</p>
<ul>
<li>基本特点：<ul>
<li><strong>客户端驱动</strong>：客户端发送的 Query 决定返回哪些字段，从而避免数据过多或不足；</li>
<li><strong>结构即查询</strong>：响应结构和查询结构一一对应；</li>
<li><strong>单一的入口</strong>：所有数据通过一个统一的入口获取，而不是多个 REST 路由；</li>
<li><strong>强类型系统</strong>：Schema 定义了客户端可以查询或操作的数据结构，提升了类型安全；</li>
<li><strong>组合与解耦</strong>：更像是一个数据抽象层，能将多个数据源聚合为一个图（通过 Resolver 控制数据来源）。</li>
</ul>
</li>
<li>技术选型：新项目、公司有配套的 GraphQL 团队、生态和经验；</li>
</ul>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><ul>
<li><a href="/2021/01/10/%E3%80%8A%E6%AD%A3%E5%88%99%E6%8C%87%E5%BC%95%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%89%88%EF%BC%89%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">《正则指引（第二版）》读书笔记</a>；</li>
</ul>
<h3 id="Git-代码版本控制"><a href="#Git-代码版本控制" class="headerlink" title="Git 代码版本控制"></a>Git 代码版本控制</h3><ul>
<li><a href="/2020/10/19/%E3%80%8APro-Git-2nd-Edition%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%88%E7%AC%AC%201-6%20%E7%AB%A0%EF%BC%89/">《Pro Git - 2nd Edition》读书笔记（第 1-6 章）</a>；</li>
</ul>
<h3 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h3><ul>
<li><a href="/2023/12/23/TypeScript-Cheat-Sheet/">TypeScript Cheat Sheet</a>；</li>
<li><a href="/2025/04/01/TypeScript-%E7%B1%BB%E5%9E%8B%E4%BD%93%E6%93%8D%E7%BB%83%E4%B9%A0%E5%86%8C/">TypeScript 类型体操练习册</a>；</li>
</ul>
<br><div class="article-bottom-meta"><span class="post-meta">Last built on<time itemprop="dateModified" datetime="2025-05-23T02:34:00.000Z"> 2025 / 07 / 29, 14:08:06</time></span></div></div></article><br><span class="prev-post"><a href="/2025/04/08/自用算法模版/" itemprop="url">⇐ 上一篇</a></span><br><section id="comments"><h4>评论 | Comments</h4><br><div class="comment-container"><div class="loading-mask">Loading ...</div><script src="https://utteranc.es/client.js" repo="Becavalier/utterances-comments" issue-term="title" label="[Comment]" theme="github-light" crossorigin="anonymous" async></script></div></section><br><br></main><script src="/scripts/index.js" type="text/javascript"></script></body></html>